# ğŸ“± Visual Guide - What You Should See

## Online Status Indicator

### In Messages List

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Messages                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                       â”‚
â”‚  â•­â”€â”€â”€â”€â”€â•®                              â”‚
â”‚  â”‚ ğŸ‘¤  â”‚ âš«  John Doe          2:30 PMâ”‚  â† Offline (no green dot)
â”‚  â•°â”€â”€â”€â”€â”€â•¯     Hey, how are you?       â”‚
â”‚                                       â”‚
â”‚  â•­â”€â”€â”€â”€â”€â•®                              â”‚
â”‚  â”‚ ğŸ‘¤  â”‚ ğŸŸ¢  Jane Smith       now    â”‚  â† Online (green dot visible!)
â”‚  â•°â”€â”€â”€â”€â”€â•¯     You: Thanks!            â”‚
â”‚         â””â”€ GREEN DOT HERE!            â”‚
â”‚                                       â”‚
â”‚  â•­â”€â”€â”€â”€â”€â•®                              â”‚
â”‚  â”‚ ğŸ‘¤  â”‚ âš«  Mike Johnson     1h     â”‚  â† Offline
â”‚  â•°â”€â”€â”€â”€â”€â•¯     See you tomorrow        â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Points:**
- ğŸŸ¢ Green dot = User is ACTIVELY in a conversation right now
- âš« No dot = User is offline or just browsing messages list
- Dot appears in **bottom-right** corner of avatar
- Updates within **2-3 seconds** of status change

### In Conversation Header

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† â•­â”€â”€â”€â•® Jane Smith                  â”‚
â”‚     â”‚ğŸ‘¤ â”‚ ğŸŸ¢ Online                  â”‚  â† Shows "Online" text
â”‚     â•°â”€â”€â”€â•¯                             â”‚      when user is in chat
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                       â”‚
â”‚           Hey! How are you?  10:30 AMâ”‚
â”‚                                       â”‚
â”‚  Good, thanks!         10:31 AM âœ“âœ“   â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Typing Indicator

### When Other User is Typing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† â•­â”€â”€â”€â•® Jane Smith                  â”‚
â”‚     â”‚ğŸ‘¤ â”‚ ğŸŸ¢ Online                  â”‚
â”‚     â•°â”€â”€â”€â•¯                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                       â”‚
â”‚           Hey! How are you?  10:30 AMâ”‚
â”‚                                       â”‚
â”‚  Good, thanks!         10:31 AM âœ“âœ“   â”‚
â”‚                                       â”‚
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ Jane Smith is typing âš« âš« âš«     â”‚ â”‚  â† Typing indicator!
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚      Dots are animated
â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Message...                    ğŸ“ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Points:**
- Shows user's name + "is typing"
- Three animated dots that bounce
- Appears immediately when they start typing
- Disappears 2 seconds after they stop

### Typing Indicator Animation

The three dots animate like this:
```
Frame 1: âš« âšª âšª  (first dot up)
Frame 2: âšª âš« âšª  (second dot up)
Frame 3: âšª âšª âš«  (third dot up)
Frame 4: âšª âšª âšª  (reset)
Repeat...
```

## Message Status (Read Receipts)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  Good, thanks!    10:31 AM âœ“         â”‚  â† âœ“ = Sent
â”‚                                       â”‚
â”‚  What's up?       10:32 AM âœ“âœ“        â”‚  â† âœ“âœ“ = Delivered
â”‚                                       â”‚
â”‚  See you soon!    10:33 AM âœ“âœ“        â”‚  â† âœ“âœ“ (green) = Read
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Status Progression:**
1. **âœ“** (single check) = Message sent to server
2. **âœ“âœ“** (double check) = Message delivered to recipient's device
3. **âœ“âœ“** (green) = Message read by recipient

## Real-World Test Scenario

### Scenario: Two Friends Chatting

**Device A (Alice):**
1. Opens Messages tab
2. Sees Bob **offline** (no green dot)
3. Waits...

**Device B (Bob):**
1. Opens conversation with Alice
2. Types "Hey Alice!"

**What Alice Sees (Device A):**
```
Step 1: Bob's avatar in list
â•­â”€â”€â”€â”€â”€â•®
â”‚ ğŸ‘¤  â”‚ âš«  Bob Wilson         â† No dot (offline)
â•°â”€â”€â”€â”€â”€â•¯

Step 2: Bob opens conversation (2-3 seconds later)
â•­â”€â”€â”€â”€â”€â•®
â”‚ ğŸ‘¤  â”‚ ğŸŸ¢  Bob Wilson         â† Green dot appears!
â•°â”€â”€â”€â”€â”€â•¯

Step 3: Alice opens conversation with Bob
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† â•­â”€â”€â”€â•® Bob Wilson         â”‚
â”‚     â”‚ğŸ‘¤ â”‚ ğŸŸ¢ Online          â”‚  â† "Online" in header
â”‚     â•°â”€â”€â”€â•¯                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚  (messages here)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Bob starts typing
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† â•­â”€â”€â”€â•® Bob Wilson         â”‚
â”‚     â”‚ğŸ‘¤ â”‚ ğŸŸ¢ Online          â”‚
â”‚     â•°â”€â”€â”€â•¯                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
â”‚  â”‚ Bob Wilson is typing  â”‚  â”‚  â† Indicator appears
â”‚  â”‚ âš« âš« âš«               â”‚  â”‚    with bouncing dots
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Bob stops typing (2 seconds)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† â•­â”€â”€â”€â•® Bob Wilson         â”‚
â”‚     â”‚ğŸ‘¤ â”‚ ğŸŸ¢ Online          â”‚
â”‚     â•°â”€â”€â”€â•¯                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚  (typing indicator gone)     â”‚  â† Indicator disappears
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 6: Bob sends message
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Hey Alice! 3:45 PM â”‚  â† Bob's message appears
â”‚                              â”‚
â”‚  (Alice's messages here)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 7: Bob closes conversation
Back in Messages list:
â•­â”€â”€â”€â”€â”€â•®
â”‚ ğŸ‘¤  â”‚ âš«  Bob Wilson         â† Dot disappears!
â•°â”€â”€â”€â”€â”€â•¯     Hey Alice!
```

## Size & Color Reference

### Online Status Dot
- **Size:** 12-14px diameter
- **Color:** `#2196F3` (blue) - matches app primary color
- **Position:** Bottom-right of avatar, slightly overlapping
- **Border:** 2px white border for contrast

### Typing Indicator
- **Background:** White with subtle border
- **Text:** Gray, 14px, italic
- **Dots:** Blue circles, 6px diameter
- **Animation:** 400ms per dot, continuous loop

### Avatar Sizes (where dot appears)
- **Messages list:** 50px avatar â†’ 14px dot
- **Conversation header:** 40px avatar â†’ 12px dot
- **Small (xs):** 24px avatar â†’ 8px dot

## Debugging: Making It Obvious

If you can't see the dot, temporarily make it HUGE and RED:

```typescript
<View style={{ 
  position: 'absolute', 
  bottom: -2, 
  right: -2,
  backgroundColor: 'red',     // Make it red
  width: 30,                  // Make it bigger
  height: 30,
  borderRadius: 15,
  zIndex: 9999,               // Bring to front
  borderWidth: 3,
  borderColor: 'yellow',      // Yellow border
}}>
  <OnlineStatusDot isOnline={true} size={20} />
</View>
```

If you still don't see it with these settings, the issue is with rendering/subscriptions, not styling.

## Expected Timeline

```
User A opens conversation
         â†“
   WebSocket connects
         â†“ (< 1 second)
 Presence channel subscribes
         â†“ (< 1 second)
   Track online=true
         â†“ (< 1 second)
Other users receive presence sync
         â†“ (< 1 second)
  State updates (isOnline=true)
         â†“ (< 1 second)
   Component re-renders
         â†“
 ğŸŸ¢ Green dot visible!
 
Total time: 2-3 seconds
```

## Common Visual Issues

### Issue: Dot appears but quickly disappears
**Cause:** Presence channel unsubscribing too early
**Fix:** Check cleanup in useEffect dependencies

### Issue: Dot is there but hard to see
**Cause:** Low contrast with avatar
**Fix:** Increase border width or change dot color

### Issue: Typing indicator shows but doesn't animate
**Cause:** Animation not running
**Fix:** Check that Animated.loop is called in useEffect

### Issue: Everything works but text says "User is typing" without name
**Cause:** userName prop not passed correctly
**Fix:** Verify otherUser.fullName is available

## Platform Differences

### iOS
- Dot renders with smooth shadows
- Animations are 60fps
- Haptic feedback available (optional)

### Android
- Dot might have slightly different shadow
- Animations still smooth
- Material Design ripple effects

### Web
- Dot renders with CSS box-shadow
- Animations use CSS transitions
- Hover states available

All platforms should show the same behavior, just with slight styling differences.

## Summary

After the fix, you should see:

**Messages List:**
- ğŸŸ¢ Green dot next to users in conversations
- Updates within 2-3 seconds

**Conversation:**
- "Online" in header when user is active
- "User is typing..." with animated dots
- Read receipts (âœ“ âœ“âœ“)

**Timing:**
- Instant: Typing indicator appears/disappears
- 2-3 seconds: Online status updates
- No delay: Read receipts

If you don't see these, check:
1. App fully restarted with cache cleared
2. Console shows "SUBSCRIBED"
3. Two different users/devices for testing
4. Both users have internet connection
